## 干一行，爱“一行”——为《Python一行流》序
> 赖勇浩



几年创业，几经浮沉，我又回到了编码一线，重拾写代码的乐趣。幸好当年读过几本经典书籍打底，如今重操旧业，尚能游刃有余。感慨中刚好春雨兄找我为《Python一行流》作序，读来很有感触，堪比当年经典，便欣然应允。

其实我一直是“一行流”的爱好者。早在使用Python 2.3版本的时代，我便尝试如何用一行代码完成字符串里的字符排序，并将过程和结果记录在博客[^1]上。虽然自从Python 2.4版本增加了`sorted()`函数后我的奇技淫巧便没了用武之地，但这种追求精确与极简的Pythonic哲学持续地影响着我，多年后我以改善Python程序为名出版了自己的第一本书。

与我的浅尝辄止不同，这本书把一行流当作了一个研究课题，所以整书极具体系。作者从Python语言、库和算法多个层面和角度去探寻更简明的代码写法，有助于读者建立深入挖掘语言特性的动力，最终提升读者的知识水平，写起代码如臂使指，“码”上生花。我曾在网上分享过一段利用数字图像形态学实现茶滤孔数计算的Python程序，需要80行代码，而网友Arkbird用一行mathematica代码完成同样的算法[^2]，“我看不懂，但我大受震憾。”[^3]读者们纷纷点赞。编写一行流的代码是一个“好程序员”的普遍追求，也是对语言、库和算法的掌握程度和编码能力的体现，但阅读本书显然有助于此，读完本书后我编写了自己的“一行流”版本：

```python
print(("holes count: ", s := __import__('skimage', fromlist=['measure', 'morphology', 'io',]))[0], s.measure.label(s.morphology.binary_opening(s.io.imread("sample.png", as_gray=True) < 0.5, selem=s.morphology.square(3)), return_num=True, connectivity=2)[1])
```

代码行数“浓缩”80倍之后，性能还提升了几十倍[^4]，同时自我感觉对Python语言、skimage库和数字图像算法的理解更进了一步。许多初学者入门后陷入不知道能用Python做什么的困惑，不妨读一下这本书，然后尝试把之前写过的代码改为“一行流”风格，应该能大有所获。

本书译者苏丹网名su27，他是圈内驰名“文艺青年”，前几年一直听说他在写小说，搞文学创作。作为长年混迹文青基地豆瓣网的程序员，这并不奇怪，奇怪的是他突然翻译了这本书。不过su27毕竟是在Python的“黄埔军校”豆瓣团队中成长起来的，这对本书的品质提供了保障。在阅读这本书的过程中，也印证了我的所想，整本书清晰明了，极具美感，加上作者精心编排的知识体系，读来如上云梯，愉悦中知识就获得了提升，是以为序。



[^1]: https://blog.csdn.net/gzlaiyonghao/article/details/1474001 [python]一行搞定字符串排序
[^2]:https://www.zhihu.com/question/20799742/answer/1739070110 你都用 Python 来做什么？ - laiyonghao的回答 - 知乎
[^3]: 导演李安在纪录片《打扰伯格曼》（2013） 里评价一部影视作品的话，后来成为网络流行语。
[^4]:测试环境：macOS 11.3.1、Python 3.9.5、scikit-image 0.18.3